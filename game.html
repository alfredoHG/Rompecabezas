<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Juego</title>
    <link rel="icon" href="" type="image/x-icon" />
    <link rel="shortcut icon" href="" type="image/x-icon" />

    <link rel="stylesheet" href="css/app.css" />

</head>
<body>
<main id="app-3m">
    <section style="background: url('images/fondo-info_04.jpg')">
        <div class="container">
            <h2>Rompecabezas</h2>
            <div class="row">
                <div class="col-lg-12">
                    <div class="container-fluid p-0">
                        <iframe id="inlineFrameExample"
                                title="Rompecabezas"
                                width="750"
                                height="475"
                                src="http://rompecabezas.com.lndo.site/rompecabezas.html">
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-12">
                    <div class="foot-info">© 3M 2021. Derechos Reservados.
                        <div class="right-foot">
                            <a href="https://3m-proyectos.s3.us-west-2.amazonaws.com/cisa/documentos/Aviso+de+Privacidad+3-CISA+Digital+Experience.pdf" target="_blank" style="margin-right:.5rem">Aviso de Privacidad</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
</main>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script>
    window.document.addEventListener('gameCompleted', handleEvent, false)
    function handleEvent(e) {
        let finJuegoDate = new Date(e.detail.final);
        let inicioJuegoDate = new Date(e.detail.init);
        $.ajax({
            url: "https://cisa2021-pruebas.virtualevents.mx/usuarios/registrar-puntaje",
            method: 'post',
            data: {
                juego: 'Rompecabezas',
                puntaje: 0, // Actualmente solo se calcula el tiempo, no está definido cómo se calculará el puntaje
                inicio_juego: inicioJuegoDate.toJSON().replace('T', ' ').substr(0, 19),
                fin_juego: finJuegoDate.toJSON().replace('T', ' ').substr(0, 19),
            }
        })
            .done(function( data ) {
                //
            })
    }
</script>
</body>
</html>